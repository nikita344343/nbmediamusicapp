# Где что взять и как настроить (WordPress + приложение)

Кратко: что откуда берётся и как это связать с приложением.

---

## 1. REST API в WordPress

### Откуда берётся
**REST API уже встроен в WordPress** — отдельный плагин ставить не нужно (начиная с WP 4.7+).

- Базовый URL: `https://ТВОЙ-САЙТ.ru/wp-json/`
- Документация по маршрутам: открой в браузере  
  `https://ТВОЙ-САЙТ.ru/wp-json/`  
  — там будет JSON со списком всех доступных endpoints.

### Основные встроенные маршруты (из коробки)

| Что нужно           | Метод | URL (относительно `/wp-json`)   |
|---------------------|-------|----------------------------------|
| Список постов       | GET   | `/wp/v2/posts`                   |
| Один пост           | GET   | `/wp/v2/posts/{id}`              |
| Страницы            | GET   | `/wp/v2/pages`                   |
| Медиа (картинки, файлы) | GET  | `/wp/v2/media`                   |
| Загрузить медиа     | POST  | `/wp/v2/media` (нужна авторизация) |
| Пользователи        | GET   | `/wp/v2/users`                   |
| Категории          | GET   | `/wp/v2/categories`              |
| Теги               | GET   | `/wp/v2/tags`                    |

Пример запроса из приложения:
```
GET https://ТВОЙ-САЙТ.ru/wp-json/wp/v2/posts?per_page=10&page=1
```

### Как проверить, что API работает
1. Открой в браузере: `https://ТВОЙ-САЙТ.ru/wp-json/wp/v2/posts`
2. Должен открыться JSON со списком постов. Если видишь JSON — API доступен.

### Если API отключён или режет плагин безопасности
- В настройках плагинов (типа Wordfence, iThemes Security и т.п.) посмотри блокировку REST API и при необходимости разреши доступ.
- На некоторых хостингах REST API режут на уровне сервера — тогда писать в поддержку хостинга.

---

## 2. Авторизация (для загрузки треков и защищённых действий)

Чтобы приложение могло **загружать** файлы (треки) или менять данные, WordPress должен понимать, кто запрашивает.

### Вариант A: Application Passwords (проще всего)

- **Где:** Админка WordPress → **Пользователи** → свой профиль → внизу блок **«Пароли приложений»** (Application Passwords).
- **Как:** Задаёшь имя (например «Android app») → **Добавить** → WordPress покажет один раз пароль приложения (длинная строка). Его нужно сохранить и использовать в приложении вместо обычного пароля (логин — твой пользователь WordPress).
- **Нужно:** WordPress 5.6+ и HTTPS на сайте. Если блока нет — включи в `wp-config.php`:  
  `define('WP_APPLICATION_PASSWORDS', true);`

### Вариант B: JWT (токены для мобильного приложения)

- **Где взять:** плагин, например **«JWT Authentication for WP REST API»** (в каталоге плагинов WordPress или на GitHub).
- **Как:** ставишь плагин, настраиваешь по инструкции (как правило, правки в `.htaccess` и в `wp-config.php`). Приложение сначала отправляет логин/пароль, получает JWT-токен и дальше шлёт его в заголовке `Authorization: Bearer <токен>` при каждом запросе.

Для начала достаточно Application Passwords.

---

## 3. CORS (если приложение с другого домена)

REST API по умолчанию может отдавать данные любому. Если позже будешь делать веб-версию приложения с другого домена (не с ТВОЙ-САЙТ.ru), браузер может ругаться на CORS.

- **Где править:** либо настройки хостинга (заголовки ответа), либо плагин типа **«WP REST API CORS»** или добавление заголовков в тему/плагин.
- Для **нативного Android-приложения** CORS обычно не мешает — ограничения CORS действуют в браузере.

---

## 4. Что понадобится от плагинов (когда соберёшь список)

Когда скинешь названия/скрины плагинов, можно будет точно сказать:

- **Статистика** — есть ли у плагина REST API или только админка. Если API нет — либо ищем другой плагин с API, либо делаем свой маленький плагин с endpoint’ом, который отдаёт нужные цифры.
- **Каталог людей** — как это реализовано: свой тип записей (CPT), таксономия, произвольные поля. От этого зависит URL в REST API (например `/wp/v2/люди` или кастомный маршрут).
- **Загрузка треков** — стандартный endpoint `/wp/v2/media` (POST) + авторизация (Application Passwords или JWT). Дополнительные поля (исполнитель, альбом и т.д.) — если они в плагине, нужно смотреть, отдаёт ли плагин их в REST API или нужно дописать свой endpoint.

---

## 5. Краткий чек-лист для тебя

1. **REST API** — встроен в WordPress, проверь: `https://ТВОЙ-САЙТ.ru/wp-json/wp/v2/posts`.
2. **Авторизация для загрузки** — Админка → Пользователи → Пароли приложений (или плагин JWT).
3. **Плагины** — скинь список (или скрины): что за статистика, как сделан каталог людей, как загружаются треки. Тогда распишу точные URL и форматы ответов под твой набор плагинов.

Когда соберёшь плагины и детали — скинь сюда, подстроим приложение и допишем, что где вызывать (включая REST API) под твой сайт.
